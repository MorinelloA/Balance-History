<html>
	<head>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script>
			window.onload = function(){
				$("#datetime").val(new Date().toJSON().slice(0,16));
			};
			
			function submit(){
				let addr = document.getElementById("address").value.trim();
				
				let datetime = document.getElementById("datetime").value;
				let liskdatetime = Date.parse(datetime) / 1000 - 1464109200;
				
				let timestampToggle = "false";
				if(document.getElementById("block").checked)
				{
					timestampToggle = "true";
				}
				
				let url = "http://api.lisk.support/v1/addresshistory?address=" + addr + "&timestamp=" + liskdatetime + "&timeByBlock=" + timestampToggle;
				
				fetch(url)
				.then(res => res.json())
				.then((out) => {
					document.getElementById("data").innerHTML = 
					"<label class='col-sm-3 col-form-label'>Received:</label><label class='col-sm-4 col-form-label'>" + Number(out.Received / 100000000).toLocaleString() + "</label><br />" +
					"<label class='col-sm-3 col-form-label'>Sent:</label><label class='col-sm-4 col-form-label'>" + Number(out.Sent / 100000000).toLocaleString() + "</label><br />" +
					"<label class='col-sm-3 col-form-label'>Fees Paid:</label><label class='col-sm-3 col-form-label'>" + Number(out.FeesPaid / 100000000).toLocaleString() + "</label><br />" +
					"<label class='col-sm-3 col-form-label'>Forged Rewards:</label><label class='col-sm-3 col-form-label'>" + Number(out.ForgedRewards / 100000000).toLocaleString() + "</label><br />" +
					"<label class='col-sm-3 col-form-label'>Fees Received:</label><label class='col-sm-3 col-form-label'>" + Number(out.FeesReceived / 100000000).toLocaleString() + "</label><br />" +
					"<label class='col-sm-3 col-form-label'><b>TOTAL</b>:</label><label class='col-sm-3 col-form-label'>" + Number(out.Total / 100000000).toLocaleString() + "</label>";
				}).catch(err => console.error(err));

			}
		</script>
	</head>
	
	<body>
    <div class="form-group row">
        <label for='address' class="col-sm-3 col-form-label">Address:</label>
        <input class="col-sm-4" id="address" type="text" value="">
    </div>
    <div class="form-group row">
        <label for='datetime' class="col-sm-3 col-form-label">DateTime:</label>
        <input class="col-sm-4" id='datetime' type='datetime-local'>
    </div>


    <label class="col-form-label" for="transaction">Transaction Timestmp</label>
    <input class="col-sm-2" type="radio" id="transaction" name="timestamp" value="transaction" checked>
    
    <label class="col-form-label" for="block">Block Timestamp</label>
    <input class="col-sm-2" type="radio" id="block" name="timestamp" value="block">

    <br />
    <br />
		
		<button class="btn btn-success btn-lg" onclick="submit()">Submit</button>
		
    <br />
    <br />
		
		<div id="data">
		</div>
	</body>
<html>
